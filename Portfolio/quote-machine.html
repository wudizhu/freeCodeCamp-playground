<!DOCTYPE html>
<html>

<head>
    <title>freeCodeCamp playground</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="node_modules\bootstrap\dist\css\bootstrap.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css\styles.css">
    <script type="text/javascript" src="node_modules\jquery\dist\jquery.min.js"></script>
    <script type="text/javascript" src="node_modules\bootstrap\dist\js\bootstrap.min.js"></script>
    <script type="text/javascript" src="lib\wiki-quote.js"></script>
</head>



<body>
    <script>

        getWikiQuote();

        //Ajax call to the wikiquote with using the library
        function getWikiQuote() {
            var API_URL = "http://en.wikiquote.org/w/api.php";
            $.ajax({
                url: API_URL,
                type: "GET",
                dataType: "jsonp",
            data: {
                format: "json",
                action: "query",
                redirects: "",
                list: "random",
                rnnamespace: "0"
                },   
            })
            .done(function(result, status, xhr) 
                {
                    processData(result, status);
                })
            .fail(
                function(xhr, status) 
                {
                    errorHandler(xhr,status);
                })
        }

        function processData(result, status) {
            console.log(result);
            
            // var x = result.query.title[0].nodeValue;
            console.log(result.query.random[0].title);
            document.getElementById("quote-text").innerHTML =
                "Title: " + result.query.random[0].title;
                
            // document.getElementById("quote-author").innerHTML =
            //     "Artist: " +
                
        }

        function errorHandler(xhr, status) {
            console.log(status);
        }




   


        function nextQuote() {
            getWikiQuote();

        }

        function previousQuote() {
            getWikiQuote();

        }

                // WikiquoteApi.queryTitles("love", 
        // function(pageid){ console.log(pageid);
        //     WikiquoteApi.getSectionsForPage(pageid, 
        //         function(result){
        //             console.log(pageid, result.sections);
        //             WikiquoteApi.getQuotesForSection(pageid, result.sections,
        //             function(result){
        //                 console.log(result);
        //             })
        //         })
        //      });


        
        // function initiateCDCatalog() {
        //     var x;
        //     var i = 0;
        //     displayCDWithJQuery(i);
        // }
        /** test ajax call with local data file **/
        // function displayCDWithJQuery(i) {
        //     $.ajax({
        //         url: "data/cd_catalog.xml",
        //         type: "GET",
        //         dataType: "xml"
        //     })
        //     .done(function(result, status, xhr) {handleItemXml(result,i);})
        //     .fail(function( xhr, status, errorThrown ) {
        //     alert( "Sorry, there was a problem!" );
        //     console.log( "Error: " + errorThrown );
        //     console.log( "Status: " + status );
        //     console.dir( xhr );
        //     })
        //     .always(function(xhr,status){
        //         console.log("The reqest is complete!");
        //     })
        // }
        
        // function handleItemXml(xml, i) {
        //     //get xml data from response
        //     console.log(xml);

        //     //navigate throw xml document
        //     x = xml.getElementsByTagName("CD");
        //     document.getElementById("quote-text").innerHTML =
        //         "Title: " +
        //         x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue;
        //     document.getElementById("quote-author").innerHTML =
        //         "Artist: " +
        //         x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue;
        // }   

        /* This is a javascript XMLHttpRequest call for learning. It is replaced by the jquery ajax.*/
        // function displayItem(i) {
        //     var xmlhttp = new XMLHttpRequest();
        //     xmlhttp.onreadystatechange = function () {
        //         if (this.readyState == 4 && this.status === 200) {
        //             handleItem(this, i);
        //         }
        //         // else 
        //         // {
        //         //     document.getElementById("quote-text").innerHTML = "Ajax failed";
        //         // }
        //     }
        //     xmlhttp.open("GET", "data/cd_catalog.xml", true);
        //     xmlhttp.send();
        // }


    </script>


<div class="container" id="quote-machine">
    <div class="row"></div>
    <div class="quote-box col-md-8 col-md-offset-2">
        <div id="quote-text">
            This is a quote!
        </div>
        <div id="quote-author">
            by Author
        </div>
        <div id="buttons">
            <a class="button" id="tweet-quote" title="Tweet this quote!" target="_blank" href="https://twitter.com/intent/tweet?hashtags=quotes&amp;related=freecodecamp&amp;"
                style="background-color: darkgreen; padding: 5px">
<i class="fa fa-twitter"></i>
</a>
<button id="next-quote" style="float:right" onclick="nextQuote()">Next quote</button>
<button id="previous-quote" style="float:right" onclick="previousQuote()">Previous quote</button>
</div>
</div>
</div>
</div>
</body>

</html>

<head>